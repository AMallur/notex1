<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Study Tonight Optimizer</title>
<style>
body {
    font-family: Arial, sans-serif;
    max-width: 750px;
    margin: 50px auto;
    padding: 20px;
}
input, select {
    margin: 5px 0;
    padding: 8px;
    width: 100%;
}
button {
    padding: 12px;
    margin-top: 15px;
    background: black;
    color: white;
    border: none;
    cursor: pointer;
}
.result {
    margin-top: 25px;
    padding: 15px;
    background: #f4f4f4;
    border-radius: 8px;
}
h3 {
    margin-top: 20px;
}
</style>
</head>
<body>

<h1>Stop Guessing What To Study Tonight</h1>

<label>Exam Date:</label>
<input type="date" id="examDate">

<h3>Topics</h3>

<div id="topics">
    <!-- Topics will be inserted here -->
</div>

<button onclick="addTopic()">Add Topic</button>
<button onclick="calculate()">Tell Me What To Study</button>

<div id="output" class="result"></div>

<script>
let topicCount = 0;

function addTopic() {
    if (topicCount >= 6) return;

    const container = document.getElementById("topics");
    const div = document.createElement("div");
    div.innerHTML = `
        <input type="text" placeholder="Topic Name" id="topic${topicCount}">
        <select id="conf${topicCount}">
            <option value="1">1 - Very Weak</option>
            <option value="2">2 - Weak</option>
            <option value="3">3 - Moderate</option>
            <option value="4">4 - Strong</option>
            <option value="5">5 - Very Strong</option>
        </select>
        <hr>
    `;
    container.appendChild(div);
    topicCount++;
}

function calculate() {
    const examDate = new Date(document.getElementById("examDate").value);
    const today = new Date();
    const msPerDay = 1000 * 60 * 60 * 24;

    const daysUntilExam = Math.max(1, Math.floor((examDate - today) / msPerDay));

    let topics = [];

    for (let i = 0; i < topicCount; i++) {
        const name = document.getElementById(`topic${i}`).value;
        const confidence = parseInt(document.getElementById(`conf${i}`).value);

        if (!name) continue;

        // Priority logic
        let weaknessScore = 6 - confidence;
        let urgencyFactor = 10 / daysUntilExam;
        let priority = weaknessScore * urgencyFactor;

        topics.push({ name, priority });
    }

    topics.sort((a, b) => b.priority - a.priority);

    const tonight = topics.slice(0, 2);
    const tomorrow = topics.slice(2, 4);
    const defer = topics.slice(4);

    let output = "<h3>Study Tonight:</h3>";
    tonight.forEach(t => output += `• ${t.name}<br>`);

    if (tomorrow.length > 0) {
        output += "<h3>Study Tomorrow:</h3>";
        tomorrow.forEach(t => output += `• ${t.name}<br>`);
    }

    if (defer.length > 0) {
        output += "<h3>Safe To Defer:</h3>";
        defer.forEach(t => output += `• ${t.name}<br>`);
    }

    document.getElementById("output").innerHTML = output;
}

// Add first topic automatically
addTopic();
</script>

</body>
</html>
